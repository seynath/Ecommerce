FROM node:20-alpine

WORKDIR /app

ARG MYSQL_HOST
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG MYSQL_DB
ARG JWT_SECRET
ARG PORT

ENV MYSQL_HOST=$MYSQL_HOST
ENV MYSQL_USER=$MYSQL_USER
ENV MYSQL_PASSWORD=$MYSQL_PASSWORD
ENV MYSQL_DB=$MYSQL_DB
ENV JWT_SECRET=$JWT_SECRET
ENV PORT=$PORT

COPY package*.json ./
RUN npm install

EXPOSE 5001

COPY . .

CMD ["node", "index.js"]
